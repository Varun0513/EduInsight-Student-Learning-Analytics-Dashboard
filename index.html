<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EduInsight ‚Äî Student Learning Analytics</title>
    <meta name="description"
        content="A data-driven learning patterns and classroom strategy insights dashboard for educators." />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <link rel="stylesheet" href="index.css" />
</head>

<body>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <header class="site-header">
        <div class="header-inner">
            <div class="brand">
                <span class="brand-icon">üéì</span>
                <div>
                    <h1 class="brand-title">EduInsight</h1>
                    <p class="brand-sub">Learning Patterns & Classroom Intelligence</p>
                </div>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label for="filter-school">School Type</label>
                    <select id="filter-school">
                        <option value="All">All Schools</option>
                        <option value="Public">Public</option>
                        <option value="Private">Private</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filter-gender">Gender</label>
                    <select id="filter-gender">
                        <option value="All">All Genders</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label for="filter-motiv">Motivation</label>
                    <select id="filter-motiv">
                        <option value="All">All Levels</option>
                        <option value="High">High</option>
                        <option value="Medium">Medium</option>
                        <option value="Low">Low</option>
                    </select>
                </div>
                <button class="btn-primary" id="btn-add-student">+ Add Student</button>
                <div class="student-count-badge" id="student-count">6,607 students</div>
            </div>
        </div>
    </header>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê HERO KPI ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <main class="main-content">

        <section class="hero-band">
            <div class="hero-gradient"></div>
            <div class="kpi-grid" id="kpi-grid">
                <div class="kpi-card" id="kpi-total">
                    <div class="kpi-icon">üë•</div>
                    <div class="kpi-value" id="kv-total">‚Äî</div>
                    <div class="kpi-label">Total Students</div>
                </div>
                <div class="kpi-card" id="kpi-score">
                    <div class="kpi-icon">üìä</div>
                    <div class="kpi-value" id="kv-score">‚Äî</div>
                    <div class="kpi-label">Avg Exam Score</div>
                </div>
                <div class="kpi-card" id="kpi-attend">
                    <div class="kpi-icon">üìÖ</div>
                    <div class="kpi-value" id="kv-attend">‚Äî</div>
                    <div class="kpi-label">Avg Attendance</div>
                </div>
                <div class="kpi-card highlight-red" id="kpi-risk">
                    <div class="kpi-icon">‚ö†Ô∏è</div>
                    <div class="kpi-value" id="kv-risk">‚Äî</div>
                    <div class="kpi-label">High-Risk Students</div>
                </div>
                <div class="kpi-card" id="kpi-hours">
                    <div class="kpi-icon">‚è≥</div>
                    <div class="kpi-value" id="kv-hours">‚Äî</div>
                    <div class="kpi-label">Avg Study Hours</div>
                </div>
                <div class="kpi-card highlight-purple" id="kpi-cluster">
                    <div class="kpi-icon">üèÜ</div>
                    <div class="kpi-value" id="kv-cluster">‚Äî</div>
                    <div class="kpi-label">Largest Persona</div>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê LEARNER PERSONAS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">üß† Learner Personas</h2>
                <p class="section-desc">Students are grouped into 5 distinct learning behavior clusters via K-Means
                    analysis. Click a persona to reveal targeted teaching strategies.</p>
            </div>
            <div class="persona-grid" id="persona-grid">
                <!-- Filled by JS -->
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê STRATEGY RECOMMENDER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="section" id="strategy-section" style="display:none">
            <div class="strategy-panel" id="strategy-panel">
                <div class="strategy-header" id="strategy-header">
                    <span id="strategy-icon"></span>
                    <div>
                        <h3 id="strategy-title">Teaching Strategies</h3>
                        <p id="strategy-subtitle"></p>
                    </div>
                    <button class="close-btn" id="close-strategy">‚úï</button>
                </div>
                <div class="strategy-tips" id="strategy-tips">
                    <!-- filled by JS -->
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê RISK RADAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">‚ö†Ô∏è Risk Radar ‚Äî Disengagement Early Warning</h2>
                <p class="section-desc">View and filter at-risk students or browse the full roster of 6,607 students by
                    persona, school, and motivation. Composite risk score based on: low attendance, motivation, exam
                    scores, internet access, and learning disabilities.</p>
            </div>
            <div class="risk-summary-row" id="risk-summary-row">
                <div class="risk-badge high"><span id="risk-high-count">‚Äî</span> High Risk</div>
                <div class="risk-badge medium"><span id="risk-med-count">‚Äî</span> Medium Risk</div>
                <div class="risk-badge low"><span id="risk-low-count">‚Äî</span> Low Risk</div>
            </div>
            <!-- Toggle: High-Risk Only / All Students -->
            <div id="risk-view-toggle" class="risk-view-toggle"></div>

            <div class="risk-charts-row">
                <div class="chart-card half">
                    <h3 class="chart-title">Risk Distribution</h3>
                    <div class="chart-wrap small"><canvas id="chart-risk-donut"></canvas></div>
                </div>
                <div class="chart-card half">
                    <h3 class="chart-title">Risk by Persona</h3>
                    <div class="chart-wrap small"><canvas id="chart-risk-persona"></canvas></div>
                </div>
            </div>
            <div class="table-wrap">
                <table class="risk-table" id="risk-table">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th class="sortable" data-sort="persona">Persona</th>
                            <th class="sortable" data-sort="school">School</th>
                            <th class="sortable" data-sort="gender">Gender</th>
                            <th class="sortable" data-sort="score">Exam Score</th>
                            <th class="sortable" data-sort="attend">Attendance</th>
                            <th class="sortable" data-sort="hours">Study Hours</th>
                            <th class="sortable" data-sort="motiv">Motivation</th>
                            <th class="sortable" data-sort="internet">Internet</th>
                            <th class="sortable" data-sort="risk_score">Risk Score</th>
                            <th class="sortable" data-sort="risk">Risk Level</th>
                        </tr>
                    </thead>
                    <tbody id="risk-tbody">
                        <!-- filled by JS -->
                    </tbody>
                </table>
            </div>
            <div class="pagination" id="risk-pagination"
                style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem; padding: 0 1rem;">
                <div id="pagination-info" style="color: var(--text-muted); font-size: 0.85rem;">Showing 1-50 of 0</div>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn btn-secondary btn-sm" id="btn-prev-page"
                        style="padding: 0.4rem 0.8rem; font-size: 0.8rem;">Previous</button>
                    <button class="btn btn-secondary btn-sm" id="btn-next-page"
                        style="padding: 0.4rem 0.8rem; font-size: 0.8rem;">Next</button>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FEATURE IMPACT ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">üìà Feature Impact on Exam Score</h2>
                <p class="section-desc">Pearson correlation of each factor with final exam scores. Positive = higher
                    values associated with higher scores. Negative = inverse relationship.</p>
            </div>
            <div class="chart-card full">
                <div class="chart-wrap tall"><canvas id="chart-correlation"></canvas></div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê CLASS ANALYTICS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">üìä Score & Attendance Analytics</h2>
                <p class="section-desc">Understand how scores distribute across the class and how attendance and study
                    time drive performance.</p>
            </div>
            <div class="charts-2col">
                <div class="chart-card">
                    <h3 class="chart-title">Score Distribution</h3>
                    <div class="chart-wrap"><canvas id="chart-score-dist"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Avg Score by Attendance Band</h3>
                    <div class="chart-wrap"><canvas id="chart-attend-score"></canvas></div>
                </div>
            </div>
            <div class="charts-2col" style="margin-top:1.5rem">
                <div class="chart-card">
                    <h3 class="chart-title">Avg Score by Study Hours Band</h3>
                    <div class="chart-wrap"><canvas id="chart-hour-score"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Attendance vs Exam Score (Scatter)</h3>
                    <div class="chart-wrap"><canvas id="chart-scatter"></canvas></div>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê SCHOOL & DEMOGRAPHIC INSIGHTS ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">üè´ School & Demographic Insights</h2>
                <p class="section-desc">Compare performance across school types, gender, motivation levels, parental
                    involvement, family income, and resource access.</p>
            </div>
            <div class="charts-3col">
                <div class="chart-card">
                    <h3 class="chart-title">School Type Comparison</h3>
                    <div class="chart-wrap"><canvas id="chart-school"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Gender Comparison</h3>
                    <div class="chart-wrap"><canvas id="chart-gender"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Motivation ‚Üí Avg Score</h3>
                    <div class="chart-wrap"><canvas id="chart-motiv"></canvas></div>
                </div>
            </div>
            <div class="charts-3col" style="margin-top:1.5rem">
                <div class="chart-card">
                    <h3 class="chart-title">Parental Involvement Impact</h3>
                    <div class="chart-wrap"><canvas id="chart-parent"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Family Income Impact</h3>
                    <div class="chart-wrap"><canvas id="chart-income"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Resource Access Impact</h3>
                    <div class="chart-wrap"><canvas id="chart-resources"></canvas></div>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PERSONA RADAR ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
        <section class="section">
            <div class="section-header">
                <h2 class="section-title">üï∏Ô∏è Persona Comparison Radar</h2>
                <p class="section-desc">Multi-dimensional comparison of all 5 learner personas across key behavioral and
                    academic metrics.</p>
            </div>
            <div class="charts-2col">
                <div class="chart-card">
                    <h3 class="chart-title">Persona Radar</h3>
                    <div class="chart-wrap"><canvas id="chart-radar"></canvas></div>
                </div>
                <div class="chart-card">
                    <h3 class="chart-title">Avg Exam Score by Persona</h3>
                    <div class="chart-wrap"><canvas id="chart-persona-score"></canvas></div>
                </div>
            </div>
        </section>

    </main>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê ADD STUDENT MODAL ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="modal-overlay" id="add-modal" style="display:none">
        <div class="modal-content">
            <div class="modal-header">
                <h2>+ Add New Student</h2>
                <button class="close-btn" id="close-modal">‚úï</button>
            </div>
            <div class="modal-tabs">
                <button class="modal-tab active" data-target="tab-single">Single Entry</button>
                <button class="modal-tab" data-target="tab-batch">Batch Upload (CSV)</button>
            </div>

            <div class="modal-body">

                <!-- TAB: SINGLE ENTRY -->
                <div id="tab-single" class="tab-pane active">
                    <p class="section-desc" style="margin-bottom:1.5rem">Enter student details to instantly predict
                        their
                        Learner Persona and Risk Level using the pre-trained model.</p>

                    <form id="add-student-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Attendance (%)</label>
                                <input type="number" id="inp-attend" min="0" max="100" value="75" required>
                            </div>
                            <div class="form-group">
                                <label>Study Hours/week</label>
                                <input type="number" id="inp-hours" min="0" value="12" required>
                            </div>
                            <div class="form-group">
                                <label>Exam Score</label>
                                <input type="number" id="inp-score" min="0" max="100" value="65" required>
                            </div>
                            <div class="form-group">
                                <label>Previous Scores</label>
                                <input type="number" id="inp-prev" min="0" max="100" value="68" required>
                            </div>
                            <div class="form-group">
                                <label>Sleep Hours</label>
                                <input type="number" id="inp-sleep" min="0" max="16" value="7" required>
                            </div>
                            <div class="form-group">
                                <label>Tutoring Sessions</label>
                                <input type="number" id="inp-tutor" min="0" max="10" value="1" required>
                            </div>
                            <div class="form-group">
                                <label>Physical Activity (Scale 1-5)</label>
                                <input type="number" id="inp-phys" min="1" max="5" value="3" required>
                            </div>
                            <div class="form-group">
                                <label>Motivation Level</label>
                                <select id="inp-motiv">
                                    <option value="High">High</option>
                                    <option value="Medium" selected>Medium</option>
                                    <option value="Low">Low</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Internet Access</label>
                                <select id="inp-internet">
                                    <option value="Yes" selected>Yes</option>
                                    <option value="No">No</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Learning Disabilities</label>
                                <select id="inp-disable">
                                    <option value="No" selected>No</option>
                                    <option value="Yes">Yes</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Peer Influence</label>
                                <select id="inp-peer">
                                    <option value="Positive">Positive</option>
                                    <option value="Neutral" selected>Neutral</option>
                                    <option value="Negative">Negative</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-actions row-gap" style="margin-top:2rem">
                            <button type="submit" class="btn-primary w-full">Predict & Add Student</button>
                        </div>
                    </form>

                    <!-- Prediction Results (hidden until submitted) -->
                    <div id="prediction-result" style="display:none; margin-top:1.5rem">
                        <div class="prediction-card">
                            <div style="flex:1">
                                <div
                                    style="font-size:0.75rem; color:var(--text-muted); text-transform:uppercase; font-weight:700">
                                    Predicted Persona</div>
                                <div id="pred-persona"
                                    style="font-size:1.2rem; font-weight:800; color:var(--text-primary); margin-top:0.25rem">
                                </div>
                            </div>
                            <div style="flex:1; border-left:1px solid var(--border); padding-left:1.5rem">
                                <div
                                    style="font-size:0.75rem; color:var(--text-muted); text-transform:uppercase; font-weight:700">
                                    Risk Level</div>
                                <div id="pred-risk" style="margin-top:0.4rem"></div>
                            </div>
                        </div>
                    </div>
                </div> <!-- END TAB SINGLE -->

                <!-- TAB: BATCH UPLOAD -->
                <div id="tab-batch" class="tab-pane">
                    <div class="upload-area" id="csv-upload-area">
                        <div style="font-size:2.5rem; margin-bottom:1rem">üìÑ</div>
                        <h3 style="margin-bottom:0.5rem">Upload CSV File</h3>
                        <p class="section-desc" style="margin-bottom:1.5rem; text-align:center">Upload a CSV file
                            containing student data to instantly predict Personas and Risk Levels for the entire class.
                        </p>
                        <input type="file" id="inp-csv" accept=".csv" style="display:none">
                        <button class="btn-primary" onclick="document.getElementById('inp-csv').click()">Select .CSV
                            File</button>
                        <p id="csv-filename"
                            style="margin-top:1rem; font-size:0.8rem; color:var(--accent-purple); display:none;"></p>
                    </div>

                    <div id="batch-results" style="display:none; margin-top:2rem">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem">
                            <h3 style="font-size:1rem">Batch Predictions (<span id="batch-count">0</span> students)</h3>
                            <button class="btn-primary" id="btn-export-batch"
                                style="padding:0.4rem 0.8rem; font-size:0.75rem; background:linear-gradient(135deg, #10B981, #059669)">Export
                                Results</button>
                        </div>
                        <div class="table-wrap" style="max-height:300px; overflow-y:auto">
                            <table class="risk-table" style="min-width:500px">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>Predicted Persona</th>
                                        <th>Risk Score</th>
                                        <th>Risk Level</th>
                                    </tr>
                                </thead>
                                <tbody id="batch-tbody"></tbody>
                            </table>
                        </div>
                    </div>
                </div> <!-- END TAB BATCH -->

            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê PREDICTION RESULT POPUP ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div id="pred-popup" style="display:none" class="pred-popup-overlay">
        <div class="pred-popup-card">
            <!-- Close -->
            <button class="pred-popup-close" id="pred-popup-close" title="Close">‚úï</button>

            <!-- Header -->
            <div class="pred-pop-header">
                <div class="pred-pop-icon-wrap">
                    <span id="pred-pop-icon" class="pred-pop-icon">üöÄ</span>
                </div>
                <div>
                    <div class="pred-pop-label">Predicted Learner Persona</div>
                    <div id="pred-pop-name" class="pred-pop-name">Driven Achiever</div>
                    <div id="pred-pop-desc" class="pred-pop-desc"></div>
                </div>
            </div>

            <!-- Risk -->
            <div class="pred-pop-risk-row">
                <div class="pred-pop-risk-left">
                    <div class="pred-pop-label">Risk Level</div>
                    <span id="pred-pop-risk-label" class="pred-pop-risk-badge">Low</span>
                </div>
                <div class="pred-pop-risk-right">
                    <div class="pred-pop-label">Risk Score</div>
                    <div id="pred-pop-risk-score" class="pred-pop-risk-score">0 / 10</div>
                </div>
            </div>
            <!-- Risk bar -->
            <div class="pred-pop-bar-track">
                <div id="pred-pop-bar-fill" class="pred-pop-bar-fill"></div>
            </div>

            <!-- Stats grid -->
            <div class="pred-pop-stats">
                <div class="pred-pop-stat">
                    <div class="pred-pop-stat-label">Exam Score</div>
                    <div id="pred-pop-score-val" class="pred-pop-stat-val">‚Äî</div>
                </div>
                <div class="pred-pop-stat">
                    <div class="pred-pop-stat-label">Attendance</div>
                    <div id="pred-pop-attend-val" class="pred-pop-stat-val">‚Äî</div>
                </div>
                <div class="pred-pop-stat">
                    <div class="pred-pop-stat-label">Study Hours</div>
                    <div id="pred-pop-hours-val" class="pred-pop-stat-val">‚Äî</div>
                </div>
                <div class="pred-pop-stat">
                    <div class="pred-pop-stat-label">Motivation</div>
                    <div id="pred-pop-motiv-val" class="pred-pop-stat-val">‚Äî</div>
                </div>
            </div>
        </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <footer class="site-footer">
        <p>EduInsight ‚Äî Built for Praxis 2.0 | Powered by K-Means Clustering, Pearson Correlation & Risk Intelligence
        </p>
        <p style="opacity:0.5;font-size:0.75rem;margin-top:0.25rem">Dataset: 6,607 students ¬∑ 20 behavioral, academic &
            socioeconomic features</p>
    </footer>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>

</html>